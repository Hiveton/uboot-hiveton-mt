<!DOCTYPE HTML>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GPT Update | HiGoOS U-Boot</title>
    <link rel="stylesheet" href="/style.css">
    <script src="/main.js"></script>
</head>
<body onload="getversion()">
    <div class="app-container">
        <!-- Sidebar Navigation -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <h2>‚ö° HiGoOS U-Boot</h2>
                <div class="subtitle">Failsafe Recovery</div>
            </div>
            
            <nav class="sidebar-nav">
                <div class="nav-section">
                    <div class="nav-section-title">Main</div>
                    <a href="/index.html" class="nav-item">
                        <span class="icon">üì¶</span>
                        <span>Firmware Update</span>
                    </a>
                    <a href="/initramfs.html" class="nav-item">
                        <span class="icon">üöÄ</span>
                        <span>Boot Initramfs</span>
                    </a>
                </div>
                
                <div class="nav-section">
                    <div class="nav-section-title">Advanced</div>
                    <a href="/bl2.html" class="nav-item">
                        <span class="icon">üîß</span>
                        <span>BL2 Preloader</span>
                    </a>
                    <a href="/uboot.html" class="nav-item">
                        <span class="icon">‚öôÔ∏è</span>
                        <span>U-Boot</span>
                    </a>
                    <a href="/gpt.html" class="nav-item active">
                        <span class="icon">üíæ</span>
                        <span>GPT Partition</span>
                    </a>
                </div>
            </nav>
            
            <div class="sidebar-footer" id="version"></div>
            <div style="text-align: center; padding: 12px; color: var(--text-secondary); font-size: 10px; border-top: 1px solid var(--border-color);">
                <a href="http://www.hiveton.com" target="_blank" style="color: var(--accent-blue); text-decoration: none;">Hiveton</a> HiGoOS U-BOOT 2026
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <div class="page-header">
                <h1>GPT Partition Table Update</h1>
                <p>Update the GUID Partition Table structure</p>
            </div>

            <!-- Alert: High Risk -->
            <div class="card alert alert-danger">
                <div class="alert-title">
                    <span>üö®</span>
                    <span>Critical Warning</span>
                </div>
                <p style="color: var(--text-secondary); font-size: 13px;">
                    Modifying the GPT partition table can cause data loss and may prevent the device from booting.
                    All existing data on the device may be lost.
                </p>
            </div>

            <!-- Upload Card -->
            <div class="card" id="upload-card">
                <div class="card-header">
                    <div class="card-title">
                        <span class="icon blue">üíæ</span>
                        <span>Upload GPT Image</span>
                    </div>
                </div>

                <form id="form">
                    <div class="form-group">
                        <label class="form-label">Select GPT File</label>
                        <div class="file-input-wrapper">
                            <input id="file" type="file" name="gpt" accept=".bin,.img,.gpt">
                        </div>
                    </div>

                    <button type="button" class="btn btn-primary btn-lg" onclick="upload('gpt')">
                        <span>üì§</span>
                        <span>Upload GPT</span>
                    </button>
                </form>
            </div>

            <!-- Progress Card (Hidden initially) -->
            <div class="card hidden" id="progress-card">
                <div class="card-header">
                    <div class="card-title">
                        <span class="icon blue">‚è≥</span>
                        <span>Upload Progress</span>
                    </div>
                </div>
                
                <div class="progress-container">
                    <div class="progress-bar">
                        <div class="progress-fill" id="progress-fill" style="width: 0%"></div>
                    </div>
                    <div class="progress-text" id="progress-text">0%</div>
                </div>
            </div>

            <!-- File Info Card (Hidden initially) -->
            <div class="card hidden" id="info-card">
                <div class="card-header">
                    <div class="card-title">
                        <span class="icon green">üìã</span>
                        <span>File Information</span>
                    </div>
                </div>
                
                <div class="info-grid">
                    <div class="info-item">
                        <div class="icon-box blue">üìè</div>
                        <div>
                            <div class="label">File Size</div>
                            <div class="value" id="size">-</div>
                        </div>
                    </div>
                    
                    <div class="info-item">
                        <div class="icon-box purple">üîê</div>
                        <div>
                            <div class="label">MD5 Checksum</div>
                            <div class="value" id="md5">-</div>
                        </div>
                    </div>
                </div>

                <div id="upgrade" class="hidden" style="text-align: center; margin-top: 24px;">
                    <p style="color: var(--accent-green); margin-bottom: 16px;">
                        ‚úÖ Ready to update GPT partition table.
                    </p>
                    <button class="btn btn-success btn-lg" onclick="location = '/flashing.html'">
                        <span>üöÄ</span>
                        <span>Start Update</span>
                    </button>
                </div>
            </div>

            <!-- Footer -->
            <div style="text-align: center; padding: 20px; color: var(--text-secondary); font-size: 12px; border-top: 1px solid var(--border-color); margin-top: 20px;">
                Hiveton HiGoOS U-BOOT 2026
            </div>

            <!-- Warning Card -->
            <div class="card alert alert-warning">
                <div class="alert-title">
                    <span>‚ö†Ô∏è</span>
                    <span>Safety Instructions</span>
                </div>
                <ul>
                    <li>Do not power off the device during update</li>
                    <li>Device will restart automatically when complete</li>
                    <li>Incorrect GPT will make the device unbootable</li>
                    <li>All data on the device will be lost</li>
                </ul>
            </div>
        </main>
    </div>
</body>
</html>
